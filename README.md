# MyXluaBackpackProject
# xLua背包系统

基于 Unity + Lua 实现的完整背包商店系统，使用 xLua 框架，支持道具分类管理、商店购买等核心功能

## 功能特性

### 背包系统
- **多标签分类**：按「装备」「道具」「宝石」实现分页显示，支持快速切换
- **动态格子布局**：自动适配道具数量，支持滚动视图加载，避免界面拥挤
- **道具详情预览**：点击道具格子显示完整信息（名称、图标、描述、属性等）
- **数量管理机制**：支持道具堆叠（同类型道具合并显示）、数量增减

### 商店系统
- **商品分类展示**：与背包分类联动，按道具类型筛选或搜索可购买商品
- **灵活购买流程**：支持自定义购买数量，实时计算总价，防止资源不足
- **动态价格体系**：道具价格在配置文件中定义，支持后续扩展逻辑
- **实时库存同步**：购买成功后即时更新背包库存，无需刷新界面

### 技术特色
- **xLua 热更新**：核心逻辑（背包管理、商店交互）均用 Lua 编写，支持运行时热重载，无需重新打包
- **Lua 面向对象**：基于 Object.lua 实现完整 OOP 架构，模块解耦，便于维护
- **AB 包资源管理**：UI 预制体、图片、配置等资源通过 AB 包动态加载，优化资源占用
- **UI 组件化设计**：以 BasePanel.lua 为面板基类，其余面板继承自改基类，新增功能无需重复开发基础逻辑

## 技术栈

| 类别         | 技术/工具                  | 说明                     |
|--------------|---------------------------|--------------------------|
| 游戏引擎     | Unity                     | 项目开发与运行基础       |
| 脚本语言     | Lua                       | 编写业务逻辑（热更新核心）|
| 热更新框架   | xLua                      | 实现 C# 与 Lua 交互、热更新 |
| UI 系统      | Unity UGUI                | 搭建背包、商店界面       |
| 数据格式     | JSON                      | 存储道具配置、玩家数据   |
| 资源管理     | AB 包（AssetBundle）      | 资源打包与动态加载       |

## 项目结构

```text
Assets/
├── Lua/                  # Lua 业务逻辑核心目录
│   ├── BagPanel.lua      # 背包面板逻辑（分类切换、道具显示）
│   ├── BasePanel.lua     # UI 面板基类（封装显示/隐藏、事件绑定）
│   ├── InitClass.lua     # Lua初始化脚本（定义常用别名）
│   ├── ItemData.lua      # 道具配置解析（读取 JSON 配置）
│   ├── ItemDes.lua       # 道具详情面板（展示道具完整信息）
│   ├── ItemGrid.lua      # 道具格子组件（显示图标、数量、点击事件）
│   ├── ItemManager.lua   # 道具管理单例（添加道具到背包）
│   ├── JsonUtility.lua   # 将Json数据读取到Lua中的表中进行存储
│   ├── Main.lua          # 程序入口（初始化系统、加载配置）
│   ├── MainPanel.lua     # 主面板UI（用于打开背包和商店）
│   ├── Object.lua        # Lua 面向对象基类（new和subClass继承）
│   ├── PlayerData.lua    # 玩家数据管理（背包数据存储，暂时只有固定数据）
│   ├── ShopItemData.lua  # 商店数据管理（商店道具的后端数据以及商店道具管理）
│   ├── ShopPanel.lua     # 商店面板逻辑（商品加载、分类、搜索与购买处理）
│   ├── SplitTools.lua    # 切割字符串逻辑
│   └── TipsPanel.lua     # 消息提示框（购买道具后提示购买结果）
├── ABRes/                # 资源文件目录（用于打包 AB 包）
│   ├── UI/               # UI 预制体（背包面板、商店面板、道具格子等）
│   ├── Json/             # 配置文件（ItemData.json 道具配置）
│   └── Sprites/          # 图片资源（道具图标、UI 背景等）
├── Scripts/              # C# 核心代码目录（与 Lua 交互、资源管理）
│   ├── Main.cs           # 用于调用lua代码
│   ├── ProjectBase/      # 管理器文件目录
│   ├── ABManager.cs      # AB包加载逻辑
│   └── LuaManager.cs     # Lua管理器（初始化lua解析器、执行lua代码等）
